{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>–¢–∞—Ä–∏—Ö</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script>
        function copyLink(id) {
            var link = window.location.origin + "/test/" + id + "/";
            navigator.clipboard.writeText(link).then(() => alert("–°—ñ–ª—Ç–µ–º–µ –∫”©—à—ñ—Ä—ñ–ª–¥—ñ!"));
        }
        function confirmDelete(url) {
            if(confirm("–°—ñ–∑ –±“±–ª —Ç–µ—Å—Ç—Ç—ñ ”©—à—ñ—Ä–≥—ñ“£—ñ–∑ –∫–µ–ª–µ –º–µ? –ë–∞—Ä–ª—ã“õ –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä –∂–æ–π—ã–ª–∞–¥—ã!")) {
                window.location.href = url;
            }
        }
    </script>
</head>
<body>
    <div class="page-container">
        <h2 style="text-align: center;">üìú –ë–∞—Å“õ–∞—Ä—É –ø–∞–Ω–µ–ª—ñ</h2>

        <div class="card">
            <h3 style="color: #00d2ff; margin-bottom: 15px;">üîó –ú–µ–Ω—ñ“£ —Ç–µ—Å—Ç—Ç–µ—Ä—ñ–º</h3>
            <div class="table-scroll">
                <table>
                    {% for test in my_tests %}
                    <tr>
                        <td>
                            <div style="font-weight: bold;">{{ test.title }}</div>
                            <div style="font-size: 11px; color: #aaa;">{{ test.date_created|date:"d.m.Y" }}</div>
                        </td>
                        <td style="text-align: right; white-space: nowrap;">
                            <button onclick="copyLink({{ test.id }})" class="btn-copy" style="margin-right: 5px;">üîó</button>
                            
                            <button onclick="confirmDelete('{% url 'delete_test' test.id %}')" 
                                    style="background: #e74c3c; color: white; border: none; padding: 6px 10px; border-radius: 6px; cursor: pointer;">
                                üóëÔ∏è
                            </button>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td>–¢–µ—Å—Ç—Ç–µ—Ä ”ô–∑—ñ—Ä–≥–µ –∂–æ“õ...</td></tr>
                    {% endfor %}
                </table>
            </div>
        </div>

        <div class="card">
            <h3 style="color: #38ef7d; margin-bottom: 15px;">üéì –û“õ—É—à—ã –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä—ñ</h3>
            <div class="table-scroll">
                <table>
                    <tr><th>–û“õ—É—à—ã</th><th>–ë–∞–ª–ª</th></tr>
                    {% for result in results %}
                    <tr>
                        <td>
                            <a href="{% url 'test_result' result.id %}" style="color: white; text-decoration: underline; font-weight: bold; cursor: pointer;">
                                {{ result.student_name }}
                            </a>
                            <br><small style="color: #aaa;">{{ result.test.title }}</small>
                        </td>
                        <td>
                            <b style="color: {% if result.score > result.total_questions|add:'-3' %}#38ef7d{% else %}#ff4757{% endif %};">
                                {{ result.score }}/{{ result.total_questions }}
                            </b>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td>–ù”ô—Ç–∏–∂–µ–ª–µ—Ä –∂–æ“õ...</td></tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </div>

    {% include 'base_nav.html' %}
</body>
</html>